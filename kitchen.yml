---
driver:
  name: docker
  privileged: true
  remove_images: true
  require_chef_omnibus: false
  use_sudo: false

provisioner:
  name: puppet_apply
  ignore_spec_fixtures: true
  manifests_path: test/fixtures/manifests
  modules_path: test/fixtures/modules
  puppetfile_path: test/fixtures/Puppetfile
  require_chef_for_busser: false

platforms:
  - name: centos-6
  - name: centos-7
    provisioner:
      puppet_yum_repo: https://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm
      puppet_yum_collections_repo: http://yum.puppetlabs.com/puppet5/puppet5-release-el-7.noarch.rpm
  - name: debian-7
  - name: debian-8
  - name: opensuse-42
    driver_config:
      image: opensuse:42.3
      platform: opensuse
    provisioner:
      custom_pre_install_command: |
        sudo zypper addrepo -n puppet5 -f -G http://yum.puppetlabs.com/puppet5/sles/12/x86_64 puppet5
        sudo zypper install -y puppet-agent kmod
  - name: opensuse-15
    driver_config:
      image: opensuse/leap:15
      platform: opensuse
    provisioner:
      custom_pre_install_command: |
        sudo zypper addrepo -n puppet5 -f -G http://yum.puppetlabs.com/puppet5/sles/15/x86_64 puppet5
        sudo zypper install -y puppet-agent
  - name: oracle-6
    driver_config:
      image: oraclelinux:6
      platform: rhel
  - name: oracle-7
    driver_config:
      image: oraclelinux:7
      platform: rhel
    provisioner:
      puppet_yum_repo: https://yum.puppetlabs.com/puppetlabs-release-el-7.noarch.rpm
      puppet_yum_collections_repo: http://yum.puppetlabs.com/puppet5/puppet5-release-el-7.noarch.rpm
  - name: ubuntu-16-04
    driver_config:
      image: ubuntu:16.04
  - name: ubuntu-18-04
    driver_config:
      image: ubuntu:18.04

transport:
  name: sftp

verifier:
  name: inspec
  reporter:
    - cli
    - junit:.kitchen/logs/%{suite}-%{platform}_inspec.xml

suites:
  - name: docker-linux-baseline

